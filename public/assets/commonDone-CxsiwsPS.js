import{s as o,j as A}from"./store-BtvAjaU5.js";import{m as d,b as L}from"./index-UBTR4qXZ.js";import{O as B,P as C,au as f,_ as N}from"./index-KPShGsqr.js";import{F as w}from"./index-B3Hzgth0.js";import{e as V,v as P,r as j,m as y,X as S,o as s,h as l,k as a,s as e,U as n,_ as D,W as m,V as i,l as b,P as I,O as M,ah as W}from"./vue-BZJL1-P9.js";import"./index-Bu_rpr0j.js";import"./index-DkzA5vqp.js";const O={class:"install-done"},U={class:"install-done-title"},F={key:0},R={key:1},z={key:2},X={key:3},q={class:"install-tis-box"},G={key:0,class:"depend-box"},H={key:0,class:"depend-loading"},J={class:"depend-tis"},K={key:0},Q={class:"color-red"},Y={key:0},Z={key:1},$={key:1,class:"color-green"},ee={key:2,class:"exec-fail color-red"},te={key:1,class:"depend-tis"},oe={key:2},ne={key:0,class:"install-tis-box text-align-center"},se={class:"install-tis"},le={class:"dependency-installation-fail-tips"},ae={class:"install-tis-box"},de={class:"install-tis"},ie={class:"install-tis-box"},me={class:"install-form"},ce=V({__name:"commonDone",setup(ue){const{t}=P.useI18n(),c=B(),u=j({rebuild:0}),r=()=>{c.toggle(!0)},g=()=>{o.dialog.common=!1,u.rebuild==1?(c.toggle(!0),c.addTaskPM("web-build",!1,"",p=>{p==C.Success&&(c.toggle(!1),o.common.moduleState!=d.DISABLE&&f())})):o.common.moduleState!=d.DISABLE&&f()},k=()=>{W.confirm(t("module.Is the command that failed on the WEB terminal executed manually or in other ways successfully?"),t("Reminder"),{confirmButtonText:t("module.yes"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{o.loading.common=!0,A(o.common.uid).then(()=>{L(),o.loading.common=!1,o.common.dependInstallState="success"})})};return(p,_)=>{const v=y("el-link"),x=y("el-button"),h=S("loading"),E=S("blur");return s(),l("div",O,[a("div",U,[e(o).common.moduleState==e(d).INSTALLED?(s(),l("span",F,n(e(t)("module.Congratulations, module installation is complete")),1)):e(o).common.moduleState==e(d).DISABLE?(s(),l("span",R,n(e(t)("module.Module is disabled")),1)):e(o).common.moduleState==e(d).DEPENDENT_WAIT_INSTALL?(s(),l("span",z,n(e(t)("module.Congratulations, the code of the module is ready")),1)):(s(),l("span",X,n(e(t)("module.Unknown state")),1))]),a("div",q,[e(o).common.dependInstallState!="none"?(s(),l("div",G,[e(o).common.dependInstallState=="executing"?D((s(),l("div",H,null,512)),[[h,!0]]):m("",!0),a("div",J,[e(o).common.dependInstallState=="executing"?(s(),l("div",K,[a("span",Q,n(e(t)("module.Do not refresh the page!")),1),e(o).common.moduleState==e(d).DISABLE?(s(),l("span",Y,n(e(t)("module.New adjustment of dependency detected")),1)):e(o).common.moduleState==e(d).DEPENDENT_WAIT_INSTALL?(s(),l("span",Z,n(e(t)("module.This module adds new dependencies")),1)):m("",!0),i("ï¼Œ "),a("span",null,n(e(t)("module.The built-in terminal of the system is automatically installing these dependencies, please wait~")),1),a("span",{class:"span-a",onClick:r},n(e(t)("module.View progress")),1)])):m("",!0),e(o).common.dependInstallState=="success"?(s(),l("div",$,n(e(t)("module.Dependency installation completed~")),1)):m("",!0),e(o).common.dependInstallState=="fail"?(s(),l("div",ee,[i(n(e(t)("module.Dependency installation fail 1"))+" ",1),a("span",{class:"span-a",onClick:r},n(e(t)("module.Dependency installation fail 2")),1),i(" "+n(e(t)("module.Dependency installation fail 3"))+" ",1),b(v,{target:"_blank",type:"primary",href:"https://doc.buildadmin.com/guide/install/manualOperation.html"},{default:I(()=>[i(n(e(t)("module.Dependency installation fail 4")),1)]),_:1})])):m("",!0)])])):e(o).common.moduleState==e(d).INSTALLED?(s(),l("div",te,n(e(t)("module.This module does not add new dependencies")),1)):(s(),l("div",oe,n(e(t)("module.There is no adjustment for system dependency")),1))]),e(o).common.dependInstallState=="fail"?(s(),l("div",ne,[a("div",se,[i(n(e(t)("module.Dependency installation fail 5"))+" ",1),a("span",{class:"span-a",onClick:k},n(e(t)("module.Dependency installation fail 6")),1),i(" "+n(e(t)("module.Dependency installation fail 7"))+" ",1),a("span",le,n(e(t)("module.dependency-installation-fail-tips")),1)])])):m("",!0),a("div",ae,[a("div",de,n(e(t)("module.please"))+n(e(o).common.moduleState==e(d).DISABLE?"":e(t)("module.After installation 1"))+n(e(t)("module.Manually clean up the system and browser cache")),1)]),a("div",ie,[a("div",me,[b(w,{label:(e(o).common.moduleState==e(d).DISABLE?"":e(t)("module.After installation 2"))+e(t)("module.Automatically execute reissue command?"),modelValue:u.rebuild,"onUpdate:modelValue":_[0]||(_[0]=T=>u.rebuild=T),type:"radio","input-attr":{border:!0,content:{0:e(t)("module.no"),1:e(t)("module.yes")}}},null,8,["label","modelValue","input-attr"])])]),D((s(),M(x,{class:"install-done-button",disabled:!(e(o).common.dependInstallState!="executing"||e(o).common.moduleState==e(d).INSTALLED),size:"large",type:"primary",onClick:g},{default:I(()=>[i(n(e(o).common.moduleState==e(d).DISABLE?e(t)("Complete"):e(t)("module.End of installation")),1)]),_:1},8,["disabled"])),[[E],[h,e(o).loading.common]])])}}}),De=N(ce,[["__scopeId","data-v-b938eda6"]]);export{De as default};
