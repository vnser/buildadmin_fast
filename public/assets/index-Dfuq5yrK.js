import{e as F,p as i,v as L,at as $,x as U,m as u,o as q,h as M,s as _,O as Q,W as A,l as e,P as t,k as l,V as c,U as p,j as V,n as C}from"./vue-BZJL1-P9.js";import{_ as D}from"./popupForm.vue_vue_type_script_setup_true_lang-BZvGsPPF.js";import{a5 as H,am as N,c as O}from"./index-KPShGsqr.js";import{d as P,b as j,T as K,a as G}from"./index-Bu_rpr0j.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-D-Kv4J1R.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-BZfairlm.js";import"./index-B3Hzgth0.js";import"./validate-45bXqi5h.js";import"./index-DkzA5vqp.js";import"./popupForm.vue_vue_type_script_setup_true_lang-DD-6WWpT.js";import"./popupForm.vue_vue_type_script_setup_true_lang-B62Okfk0.js";const X={class:"default-main ba-table-box"},Y={style:{float:"left",width:"70%","text-align":"left","font-size":"12px"}},Z=["src"],ee=l("br",null,null,-1),te=["src"],le=l("br",null,null,-1),ae=["src"],oe=l("br",null,null,-1),se={style:{float:"right"}},re=["src"],ne={style:{width:"200px",margin:"0 auto"}},ie=["src"],de={class:"cell-item"},ce={class:"cell-item"},ue={class:"cell-item"},me={style:{"white-space":"break-spaces","word-break":"break-all"}},Be=F({name:"business/card",__name:"index",setup(pe){const f=i(!1),b=i(!1),h=i(!1),n=i({}),S=i(""),B=i(""),{t:s}=L.useI18n(),z=i(),I=i(),T=i();let g=P(["edit","delete"]);const v=i(!1);g=[{render:"tipButton",name:"info",title:"名片小程序码",text:"",type:"primary",icon:"fa fa-qrcode",class:"table-row-info",attr:{loading:v},click:(r,a)=>{v.value=!0,n.value=r,O({url:"/admin/business.card/qrcode",method:"post",data:{card_id:n.value.id}}).then(m=>{v.value=!1,m.code&&(h.value=!0,S.value=m.data.src,B.value=m.data.scheme)})}},{render:"tipButton",name:"info",title:"视频列表",text:"",type:"primary",icon:"fa fa-file-video-o",class:"table-row-info",click:(r,a)=>{f.value=!0,n.value=r,C(()=>{console.log(I.value.reloadList())})}},{render:"tipButton",name:"info",title:"图片集",text:"",type:"primary",icon:"fa fa-file-photo-o",class:"table-row-info",click:(r,a)=>{b.value=!0,n.value=r,C(()=>{console.log(T.value.reloadList())})}}].concat(g);const d=new j(new H("/admin/business.Card/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:s("business.card.id"),prop:"id",align:"center",width:70,operator:!1,sortable:"custom"},{label:s("business.card.name"),prop:"name",align:"center",width:90,operatorPlaceholder:s("Fuzzy query"),operator:"LIKE",sortable:!1},{label:"主题色",prop:"theme_color",align:"center",width:90,render:"color",operator:!1},{label:s("business.card.banner"),prop:"banner",align:"center",render:"images",operator:!1,width:160},{label:"分组",prop:"classify.string",align:"center",render:"tags",operator:!1,width:160},{label:"分组",prop:"classify_ids",align:"center",operator:"FIND_IN_SET",show:!1,comSearchRender:"remoteSelect",remote:{pk:"zb_business_classify.id",field:"string",remoteUrl:"/admin/business.Classify/index",multiple:!0}},{label:s("business.card.phone"),prop:"phone",align:"center",operatorPlaceholder:s("Fuzzy query"),operator:"LIKE",sortable:!1,render:"slot",slotName:"phone_info"},{label:"状态",prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:s("business.video.status 0"),1:s("business.video.status 1")},width:100},{label:s("business.card.createtime"),prop:"createtime",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:s("Operate"),align:"center",render:"buttons",buttons:g,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{content:"",theme_color:"#2982E1",status:1}});return $("baTable",d),U(()=>{var r;d.table.ref=z.value,d.mount(),(r=d.getIndex())==null||r.then(()=>{d.initSort(),d.dragSort()}),window.loadLangHandle["./backend/zh-cn/business/video.ts"]().then(a=>{N(a.default,"business/video")}),window.loadLangHandle["./backend/zh-cn/business/galleryimgs.ts"]().then(a=>{N(a.default,"business/galleryimgs")})}),(r,a)=>{const m=u("el-alert"),R=u("el-table-column"),y=u("el-dialog"),w=u("user"),k=u("el-icon"),x=u("el-descriptions-item"),E=u("el-descriptions");return q(),M("div",X,[_(d).table.remark?(q(),Q(m,{key:0,class:"ba-table-alert",title:_(d).table.remark,type:"info","show-icon":""},null,8,["title"])):A("",!0),e(K,{buttons:["refresh","add","edit","delete","comSearch"],"quick-search-placeholder":_(s)("Quick search placeholder",{fields:_(s)("business.card.quick Search Fields")})},null,8,["quick-search-placeholder"]),e(G,{ref_key:"tableRef",ref:z},{phone_info:t(()=>[e(R,{prop:"video_url",label:"联系方式",width:"460",align:"center"},{default:t(o=>[l("div",Y,[l("img",{src:o.row.phone_icon,alt:"",style:{width:"20px"}},null,8,Z),c(" 电话："+p(o.row.phone),1),ee,l("img",{src:o.row.wechat_icon,alt:"",style:{width:"20px"}},null,8,te),c(" 微信："+p(o.row.wechat),1),le,l("img",{src:o.row.address_icon,alt:"",style:{width:"20px"}},null,8,ae),c(" 地址："+p(o.row.address),1),oe]),l("div",se,[l("img",{src:o.row.wechat_qrcode,alt:"",style:{width:"80px"}},null,8,re)])]),_:1})]),_:1},512),e(D),e(y,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=o=>f.value=o),title:`视频列表 - ${n.value.name}`,width:"80%"},{default:t(()=>[e(W,{card:n.value,ref_key:"videosRef",ref:I},null,8,["card"])]),_:1},8,["modelValue","title"]),e(y,{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=o=>b.value=o),title:`图片集 - ${n.value.name}`,width:"98%"},{default:t(()=>[e(J,{card:n.value,ref_key:"galleryimgsRef",ref:T},null,8,["card"])]),_:1},8,["modelValue","title"]),e(y,{modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=o=>h.value=o),title:`访问小程序码- ${n.value.name}`,width:"340px"},{default:t(()=>[l("div",ne,[l("img",{src:S.value,style:{width:"100%"}},null,8,ie)]),e(E,{title:"小程序信息",column:1,size:"small",border:""},{default:t(()=>[e(x,null,{label:t(()=>[l("div",de,[e(k,{style:V(r.iconStyle)},{default:t(()=>[e(w)]),_:1},8,["style"]),c(" 访问路径 ")])]),default:t(()=>[c(" /pages/cardDetail/index ")]),_:1}),e(x,null,{label:t(()=>[l("div",ce,[e(k,{style:V(r.iconStyle)},{default:t(()=>[e(w)]),_:1},8,["style"]),c(" 访问参数 ")])]),default:t(()=>[c(" cardId="+p(n.value.id),1)]),_:1}),e(x,null,{label:t(()=>[l("div",ue,[e(k,{style:V(r.iconStyle)},{default:t(()=>[e(w)]),_:1},8,["style"]),c(" Scheme ")])]),default:t(()=>[l("div",me,p(B.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}}});export{Be as default};
