import{e as Pe,r as S,o as s,h as _e,O as m,s as n,W as y,a8 as M,a7 as O,v as Me,p as Se,m as P,X as R,P as b,_ as Ee,V as W,U as j,k as De,j as Ie,l as h}from"./vue-BZJL1-P9.js";import{F as f}from"./index-B3Hzgth0.js";import{c as Ue,b as x}from"./validate-45bXqi5h.js";import{c as q,j as Ae,e as qe}from"./index-KPShGsqr.js";import{i as _}from"./index-Bu_rpr0j.js";const C="/admin/routine.Config/",K=new Map([["index",C+"index"],["add",C+"add"],["edit",C+"edit"],["del",C+"del"],["sendTestMail",C+"sendTestMail"]]);function Fe(){return q({url:K.get("index"),method:"get"})}function Ke(c,V){return q({url:K.get(c),method:"post",data:V},{showSuccessMessage:!0})}function Le(c){return q({url:K.get("del"),method:"DELETE",params:{ids:c}},{showSuccessMessage:!0})}function $e(c,V){return q({url:K.get("sendTestMail"),method:"POST",data:Object.assign({},c,{testMail:V})},{showSuccessMessage:!0})}const Ne=Pe({__name:"createData",props:{dataTitle:{default:Ae.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:{},excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(c,{emit:V}){var v,u,T,E,k,D,I,U,A,r,z,F,L,$,G,X,H,J,Q,Y,Z,ee,te,le,ae,oe,ie,ne,ue,se,de,re;const{t:a}=Ae.global,t=c,w=["radio","checkbox","select","selects"],e=S({name:{show:((u=(v=t.options)==null?void 0:v.name)==null?void 0:u.show)!==!1,value:t.modelValue.name,title:((E=(T=t.options)==null?void 0:T.name)==null?void 0:E.title)??t.dataTitle+a("utils.Name")},title:{show:((D=(k=t.options)==null?void 0:k.title)==null?void 0:D.show)!==!1,value:t.modelValue.title,title:((U=(I=t.options)==null?void 0:I.title)==null?void 0:U.title)??t.dataTitle+a("utils.Title")},type:{show:((r=(A=t.options)==null?void 0:A.type)==null?void 0:r.show)!==!1,value:t.modelValue.type,title:((F=(z=t.options)==null?void 0:z.type)==null?void 0:F.title)??t.dataTitle+a("utils.type")},tip:{show:(($=(L=t.options)==null?void 0:L.tip)==null?void 0:$.show)!==!1,value:t.modelValue.tip,title:((X=(G=t.options)==null?void 0:G.tip)==null?void 0:X.title)??a("utils.Tip")},rule:{show:((J=(H=t.options)==null?void 0:H.rule)==null?void 0:J.show)!==!1,value:t.modelValue.rule,title:((Y=(Q=t.options)==null?void 0:Q.rule)==null?void 0:Y.title)??a("utils.Rule")},extend:{show:((ee=(Z=t.options)==null?void 0:Z.extend)==null?void 0:ee.show)!==!1,value:t.modelValue.extend,title:((le=(te=t.options)==null?void 0:te.extend)==null?void 0:le.title)??"FormItem "+a("utils.Extend")},dict:{show:((oe=(ae=t.options)==null?void 0:ae.dict)==null?void 0:oe.show)!==!1,value:t.modelValue.dict,title:((ne=(ie=t.options)==null?void 0:ie.dict)==null?void 0:ne.title)??a("utils.Dict")},inputExtend:{show:((se=(ue=t.options)==null?void 0:ue.inputExtend)==null?void 0:se.show)!==!1,value:t.modelValue.inputExtend,title:((re=(de=t.options)==null?void 0:de.inputExtend)==null?void 0:re.title)??"Input "+a("utils.Extend")}}),g=S({validators:{},inputTypes:{}}),o=V,d=()=>{o("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:w.includes(e.type.value??"")?e.dict.value??"":"",inputExtend:e.inputExtend.value??""})};return(()=>{let B={};for(const p in _)t.excludeInputTypes.includes(_[p])||(B[_[p]]=_[p]);g.inputTypes=B;let l={};for(const p in Ue)t.excludeValidatorRule.includes(p)||(l[p]=Ue[p]);g.validators=l,d()})(),(B,l)=>{var p,pe,me,fe,ce,ge,ye,Ve,ve,be,he,xe,we,ke,Ce,Te;return s(),_e("div",null,[e.name.show?(s(),m(f,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":l[0]||(l[0]=i=>e.name.value=i),placeholder:n(a)("Please input field",{field:e.name.title}),"input-attr":{onChange:d,...(pe=(p=t.options)==null?void 0:p.name)==null?void 0:pe.inputAttr},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.title.show?(s(),m(f,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":l[1]||(l[1]=i=>e.title.value=i),placeholder:n(a)("Please input field",{field:e.title.title}),"input-attr":{onChange:d,...(fe=(me=t.options)==null?void 0:me.title)==null?void 0:fe.inputAttr},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.type.show?(s(),m(f,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":l[2]||(l[2]=i=>e.type.value=i),placeholder:n(a)("Please select field",{field:e.type.title}),"input-attr":{onChange:d,content:g.inputTypes,...(ge=(ce=t.options)==null?void 0:ce.type)==null?void 0:ge.inputAttr},prop:"type"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.dict.show&&w.includes(e.type.value)?(s(),m(f,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":l[3]||(l[3]=i=>e.dict.value=i),"input-attr":{rows:3,placeholder:n(a)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:d,...(Ve=(ye=t.options)==null?void 0:ye.dict)==null?void 0:Ve.inputAttr},prop:"dict",onKeyup:l[4]||(l[4]=M(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0),e.tip.show?(s(),m(f,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":l[5]||(l[5]=i=>e.tip.value=i),placeholder:n(a)("Please input field",{field:e.tip.title}),"input-attr":{onChange:d,...(be=(ve=t.options)==null?void 0:ve.tip)==null?void 0:be.inputAttr},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.rule.show?(s(),m(f,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":l[6]||(l[6]=i=>e.rule.value=i),placeholder:n(a)("Please select field",{field:e.rule.title}),"input-attr":{onChange:d,content:g.validators,...(xe=(he=t.options)==null?void 0:he.rule)==null?void 0:xe.inputAttr},prop:"rule"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.extend.show?(s(),m(f,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":l[7]||(l[7]=i=>e.extend.value=i),"input-attr":{onChange:d,placeholder:n(a)("utils.One attribute per line without quotation marks(formitem)"),...(ke=(we=t.options)==null?void 0:we.extend)==null?void 0:ke.inputAttr},prop:"extend",onKeyup:l[8]||(l[8]=M(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0),e.inputExtend.show?(s(),m(f,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":l[9]||(l[9]=i=>e.inputExtend.value=i),"input-attr":{onChange:d,placeholder:n(a)("utils.Extended properties of Input, one line without quotation marks, such as: size=large"),...(Te=(Ce=t.options)==null?void 0:Ce.inputExtend)==null?void 0:Te.inputAttr},prop:"inputExtend",onKeyup:l[10]||(l[10]=M(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0)])}}}),Be={class:"title"},Ge=Pe({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(c,{emit:V}){const a=qe(),t=V,w=()=>{t("update:modelValue",!1)},{t:e}=Me.useI18n(),g=Se(),o=S({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),d=S({group:[x({name:"required",trigger:"change",message:e("Please select field",{field:e("routine.config.Variable grouping")})})],name:[x({name:"required",title:e("routine.config.Variable name")}),x({name:"varName",message:e("Please enter the correct field",{field:e("routine.config.Variable name")})})],title:[x({name:"required",title:e("routine.config.Variable title")})],type:[x({name:"required",trigger:"change",message:e("Please select field",{field:e("routine.config.Variable type")})})],weigh:[x({name:"integer",title:e("routine.config.number")})]}),N=()=>{g.value&&g.value.validate(v=>{v&&(o.addConfig.content=o.formItemData.dict,delete o.formItemData.dict,Ke("add",{...o.addConfig,...o.formItemData}).then(()=>{t("update:modelValue",!1)}))})};return(v,u)=>{const T=P("el-form"),E=P("el-scrollbar"),k=P("el-button"),D=P("el-dialog"),I=R("drag"),U=R("zoom"),A=R("blur");return s(),m(D,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":v.modelValue,onClose:w},{header:b(()=>[Ee((s(),_e("div",Be,[W(j(n(e)("routine.config.Add configuration item")),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[U,".ba-operate-dialog"]])]),footer:b(()=>[De("div",{style:Ie("width: calc(100% - "+o.labelWidth/1.8+"px)")},[h(k,{onClick:w},{default:b(()=>[W(j(n(e)("Cancel")),1)]),_:1}),Ee((s(),m(k,{loading:o.submitLoading,onClick:u[4]||(u[4]=r=>N()),type:"primary"},{default:b(()=>[W(j(n(e)("Add")),1)]),_:1},8,["loading"])),[[A]])],4)]),default:b(()=>[h(E,{class:"ba-table-form-scrollbar"},{default:b(()=>[De("div",{class:"ba-operate-form ba-add-form",style:Ie(n(a).layout.shrink?"":"width: calc(100% - "+o.labelWidth/2+"px)")},[h(T,{ref_key:"formRef",ref:g,onKeyup:u[3]||(u[3]=M(r=>N(),["enter"])),rules:d,model:{...o.addConfig,...o.formItemData},"label-position":n(a).layout.shrink?"top":"right","label-width":160},{default:b(()=>[h(f,{label:n(e)("routine.config.Variable grouping"),type:"select",modelValue:o.addConfig.group,"onUpdate:modelValue":u[0]||(u[0]=r=>o.addConfig.group=r),prop:"group","input-attr":{content:v.configGroup}},null,8,["label","modelValue","input-attr"]),h(Ne,{modelValue:o.formItemData,"onUpdate:modelValue":u[1]||(u[1]=r=>o.formItemData=r)},null,8,["modelValue"]),h(f,{label:n(e)("Weigh"),type:"number",modelValue:o.addConfig.weigh,"onUpdate:modelValue":u[2]||(u[2]=r=>o.addConfig.weigh=r),modelModifiers:{number:!0},prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model","label-position"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{Ge as _,$e as a,Le as d,Fe as i,Ke as p};
