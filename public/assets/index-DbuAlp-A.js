import{b as h,d as g,T as k,a as _}from"./index-Cgr755Cc.js";import x from"./popupForm-DNVgIcrl.js";import{c as y,a5 as C,x as R}from"./index-CPy2hEef.js";import{e as v,v as I,p,at as T,au as w,x as A,m as E,o as b,h as N,s,P as q,X as F,l as i}from"./vue-DFhsJZqQ.js";import"./index-BVMar5_0.js";import"./index-64RmlQoR.js";import"./validate-BUeDMdsM.js";function G(){return y({url:"/admin/user.Rule/index",method:"get"})}const K={class:"default-main ba-table-box"},H=v({name:"user/group",__name:"index",setup(L){const{t}=I.useI18n(),u=p(),d=p(),e=new h(new C("/admin/user.Group/"),{column:[{type:"selection",align:"center",operator:!1},{label:t("Id"),prop:"id",align:"center",operator:"=",operatorPlaceholder:t("Id"),width:70},{label:t("user.group.Group name"),prop:"name",align:"center",operator:"LIKE",operatorPlaceholder:t("Fuzzy query")},{label:t("State"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:t("Disable"),1:t("Enable")}},{label:t("Update time"),prop:"update_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:t("Create time"),prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:t("Operate"),align:"center",width:"130",render:"buttons",buttons:g(["edit","delete"]),operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{status:"1"}},{onSubmit:({formEl:a,operate:r,items:o})=>{var o=T(o);o.rules=d.value.getCheckeds();for(const l in o)o[l]===null&&delete o[l];r=r.replace(r[0],r[0].toLowerCase());let c=()=>{e.form.submitLoading=!0,e.api.postData(r,o).then(l=>{var f;e.onTableHeaderAction("refresh",{}),e.form.submitLoading=!1,(f=e.form.operateIds)==null||f.shift(),e.form.operateIds.length>0?e.toggleForm("Edit",e.form.operateIds):e.toggleForm(),e.runAfter("onSubmit",{res:l})}).catch(()=>{e.form.submitLoading=!1})};return a?(e.form.ref=a,a.validate(l=>{l&&c()})):c(),!1}},{toggleForm({operate:a}){a=="Add"&&m()},requestEdit(){m()}}),m=()=>{G().then(a=>{if(e.form.extend.menuRules=a.data.list,e.form.items.rules&&e.form.items.rules.length)if(e.form.items.rules.includes("*")){let r=[];for(const n in e.form.extend.menuRules)r.push(e.form.extend.menuRules[n].id);e.form.extend.defaultCheckedKeys=r}else e.form.extend.defaultCheckedKeys=e.form.items.rules;else e.form.extend.defaultCheckedKeys=[];e.form.extend.treeKey=R()})};return w("baTable",e),A(()=>{e.table.ref=u.value,e.mount(),e.getIndex()}),(a,r)=>{const n=E("el-alert");return b(),N("div",K,[s(e).table.remark?(b(),q(n,{key:0,class:"ba-table-alert",title:s(e).table.remark,type:"info","show-icon":""},null,8,["title"])):F("",!0),i(k,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":s(t)("Quick search placeholder",{fields:s(t)("user.group.GroupName")})},null,8,["quick-search-placeholder"]),i(_,{ref_key:"tableRef",ref:u},null,512),i(x,{ref_key:"formRef",ref:d},null,512)])}}});export{H as default};
