import{e as w,v as x,p as m,at as C,x as E,C as T,f as R,m as d,o as b,h as B,s as n,O as N,W as V,l as s,P as c,k as q,V as I,U as O,n as S}from"./vue-BZJL1-P9.js";import{_ as M}from"./popupForm.vue_vue_type_script_setup_true_lang-bUED4St0.js";import{a5 as F}from"./index-KPShGsqr.js";import{d as P,b as $,T as j,a as z}from"./index-Bu_rpr0j.js";import"./index-B3Hzgth0.js";import"./index-DkzA5vqp.js";const A={class:"default-main ba-table-box"},D=["data-id","data-parent-id"],L=w({name:"product/classify",__name:"index",setup(H){const{t}=x.useI18n(),r=m(),h=P(["weigh-sort","edit","delete"]),a=new $(new F("/admin/product.Classify/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:t("product.classify.title"),width:220,prop:"title",align:"left",operatorPlaceholder:"k60、小米...,支持查找顶级",operator:!1,sortable:!1},{label:t("product.classify.pid"),prop:"parent.title",align:"center",operator:!1,sortable:!1,render:"slot",slotName:"parent_title"},{label:t("product.classify.status"),prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:t("product.classify.status 0"),1:t("product.classify.status 1")}},{label:t("product.classify.weigh"),prop:"weigh",align:"center",operator:!1,sortable:"custom"},{label:t("product.classify.create_time"),prop:"create_time",align:"center",render:"datetime",operator:!1,sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:t("Operate"),align:"center",width:140,render:"buttons",buttons:h,operator:!1}],dblClickNotEditColumn:[void 0,"status"],defaultOrder:{prop:"weigh",order:"desc"}},{defaultItems:{status:"1",weigh:"0"}},{},{});C("baTable",a),E(()=>{var e;a.table.ref=r.value,a.mount(),(e=a.getIndex())==null||e.then(()=>{a.initSort(),a.dragSort()}),T(u,()=>{S(()=>{g()})},{deep:!0})});const o=m({}),_=(e,l)=>{l?o.value[e.id]=!0:delete o.value[e.id]},g=()=>{r.value&&u.value.forEach(e=>{o.value[e.id]&&r.value.getRef().toggleRowExpansion(e,!0),e.children&&e.children.length&&p(e.children)})},p=e=>{e.forEach(l=>{o.value[l.id]&&r.value.getRef().toggleRowExpansion(l,!0),l.children&&l.children.length&&p(l.children)})},u=R(()=>a.table.data);return(e,l)=>{const y=d("el-alert"),k=d("el-tag"),v=d("el-table-column");return b(),B("div",A,[n(a).table.remark?(b(),N(y,{key:0,class:"ba-table-alert",title:n(a).table.remark,type:"info","show-icon":""},null,8,["title"])):V("",!0),s(j,{buttons:["refresh","add","edit","delete"],"quick-search-placeholder":n(t)("Quick search placeholder",{fields:n(t)("product.classify.quick Search Fields")})},null,8,["quick-search-placeholder"]),s(z,{ref_key:"tableRef",ref:r,pagination:!1,onExpandChange:_},{parent_title:c(()=>[s(v,{prop:"parent_title",label:"上级",align:"center"},{default:c(i=>[q("div",{class:"dataset","data-id":i.row.id,"data-parent-id":i.row.pid},[s(k,{size:"small"},{default:c(()=>{var f;return[I(O(((f=i.row.parent)==null?void 0:f.title)??"顶级"),1)]}),_:2},1024)],8,D)]),_:1})]),_:1},512),s(M)])}}});export{L as default};
