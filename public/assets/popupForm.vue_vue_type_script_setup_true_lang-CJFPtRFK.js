import{e as j,p as A,an as D,v as M,r as T,m as d,X as b,o as p,O as h,P as s,_ as w,h as E,V,U as v,s as e,k,j as U,l as r,$ as K,a7 as H,a8 as L,W as O}from"./vue-BZJL1-P9.js";import{F as m}from"./index-B3Hzgth0.js";import{e as R}from"./index-KPShGsqr.js";const X={class:"title"},G=k("i",{class:"fa fa-trash-o"},null,-1),ee=j({__name:"popupForm",setup(J){const C=R(),c=A(),t=D("baTable"),{t:a}=M.useI18n(),x=()=>{t.form.items.goods_attr.push({payback_price:"",name:""})},$=y=>{let l=t.form.items.goods_attr[y];l.id&&(t.form.items.delattr||(t.form.items.delattr=[]),t.form.items.delattr.push(l)),t.form.items.goods_attr=t.form.items.goods_attr.filter((n,u)=>u!==y)},q=()=>{t.form.items.isattr=1,t.onSubmit(c.value)},g=T({price:[{required:!0,message:"请输入金额",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"change"}],product_classify_ids:[{required:!0,message:"请选择分类",trigger:"change"}],images:[{required:!0,message:"请选择产品图",trigger:"change"}],weigh:[{required:!0,message:"请输入排序值",trigger:"change"}],goods_attr:[{required:!0,message:"请添加回收属性",trigger:"change"}],goods_attr_price:[{required:!0,message:"请添加回收属性价格",trigger:"change"}],goods_attr_name:[{required:!0,message:"请添加回收属性项",trigger:"change"}],goods_attr_unit:[{required:!0,message:"请添加回收属性项",trigger:"change"}]});return(y,l)=>{const n=d("el-button"),u=d("el-input"),f=d("el-form-item"),_=d("el-table-column"),S=d("el-table"),F=d("el-form"),I=d("el-scrollbar"),P=d("el-dialog"),z=b("drag"),B=b("zoom"),N=b("loading"),W=b("blur");return p(),h(P,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(t).form.operate),onClose:e(t).toggleForm,width:"50%"},{header:s(()=>[w((p(),E("div",X,[V(v(e(t).form.operate?e(a)(e(t).form.operate):""),1)])),[[z,[".ba-operate-dialog",".el-dialog__header"]],[B,".ba-operate-dialog"]])]),footer:s(()=>[k("div",{style:U("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[r(n,{onClick:l[8]||(l[8]=o=>e(t).toggleForm())},{default:s(()=>[V(v(e(a)("Cancel")),1)]),_:1}),w((p(),h(n,{loading:e(t).form.submitLoading,onClick:l[9]||(l[9]=o=>q(c.value)),type:"primary"},{default:s(()=>[V(v(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(a)("Save and edit next item"):e(a)("Save")),1)]),_:1},8,["loading"])),[[W]])],4)]),default:s(()=>[w((p(),h(I,{class:"ba-table-form-scrollbar"},{default:s(()=>[k("div",{class:K(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:U(e(C).layout.shrink?"":"width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[e(t).form.loading?O("",!0):(p(),h(F,{key:0,ref_key:"formRef",ref:c,onSubmit:l[6]||(l[6]=H(()=>{},["prevent"])),onKeyup:l[7]||(l[7]=L(o=>e(t).onSubmit(c.value),["enter"])),model:e(t).form.items,"label-position":e(C).layout.shrink?"top":"right","label-width":e(t).form.labelWidth+"px",rules:g},{default:s(()=>[r(m,{label:e(a)("product.goods.title"),type:"string",modelValue:e(t).form.items.title,"onUpdate:modelValue":l[0]||(l[0]=o=>e(t).form.items.title=o),prop:"title",placeholder:e(a)("Please input field",{field:e(a)("product.goods.title")})},null,8,["label","modelValue","placeholder"]),r(m,{label:e(a)("product.goods.price"),type:"number",prop:"price","input-attr":{step:1},modelValue:e(t).form.items.price,"onUpdate:modelValue":l[1]||(l[1]=o=>e(t).form.items.price=o),modelModifiers:{number:!0},placeholder:e(a)("Please input field",{field:e(a)("product.goods.price")})},null,8,["label","modelValue","placeholder"]),r(m,{label:e(a)("product.goods.product_classify_ids"),modelValue:e(t).form.items.product_classify_ids,"onUpdate:modelValue":l[2]||(l[2]=o=>e(t).form.items.product_classify_ids=o),prop:"product_classify_ids",type:"remoteSelects","input-attr":{pk:"mm_product_classify.id",field:"categories_batch_name",remoteUrl:"/admin/product.Classify/index?goods_select=1&isTree=true"},placeholder:e(a)("Please select field",{field:e(a)("product.goods.product_classify_ids")})},null,8,["label","modelValue","placeholder"]),r(m,{label:e(a)("product.goods.images"),type:"images",modelValue:e(t).form.items.images,"onUpdate:modelValue":l[3]||(l[3]=o=>e(t).form.items.images=o),blockHelp:"建议尺寸：1125x777",prop:"images"},null,8,["label","modelValue"]),r(m,{label:e(a)("product.goods.status"),type:"switch",modelValue:e(t).form.items.status,"onUpdate:modelValue":l[4]||(l[4]=o=>e(t).form.items.status=o),prop:"status","input-attr":{content:{0:e(a)("product.goods.status 0"),1:e(a)("product.goods.status 1")}}},null,8,["label","modelValue","input-attr"]),r(m,{label:e(a)("product.goods.weigh"),type:"number",prop:"weigh","input-attr":{step:1},modelValue:e(t).form.items.weigh,"onUpdate:modelValue":l[5]||(l[5]=o=>e(t).form.items.weigh=o),modelModifiers:{number:!0},placeholder:e(a)("Please input field",{field:e(a)("product.goods.weigh")})},null,8,["label","modelValue","placeholder"]),r(f,{label:"回收属性","label-position":"right",prop:"goods_attr"},{default:s(()=>[r(n,{onClick:x},{default:s(()=>[V("+ 增加")]),_:1}),r(S,{data:e(t).form.items.goods_attr,style:{width:"100%"}},{default:s(()=>[r(_,{prop:"name",label:"名称",width:"180"},{default:s(o=>[r(f,{prop:`goods_attr.${o.$index}.name`,rules:g.goods_attr_name},{default:s(()=>[r(u,{modelValue:o.row.name,"onUpdate:modelValue":i=>o.row.name=i,placeholder:"名称项"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),r(_,{prop:"price",label:"价格",width:"180"},{default:s(o=>[r(f,{prop:`goods_attr.${o.$index}.payback_price`,rules:g.goods_attr_price},{default:s(()=>[r(u,{modelValue:o.row.payback_price,"onUpdate:modelValue":i=>o.row.payback_price=i,placeholder:"回收价格"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),r(_,{prop:"price",label:"单位",width:"180"},{default:s(o=>[r(f,{prop:`goods_attr.${o.$index}.unit`,rules:g.goods_attr_unit},{default:s(()=>[r(u,{modelValue:o.row.unit,"onUpdate:modelValue":i=>o.row.unit=i,placeholder:"单位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),r(_,{prop:"address",label:"操作"},{default:s(o=>[r(n,{onClick:i=>$(o.$index)},{default:s(()=>[G]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[N,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{ee as _};
