import{e as E,u as xe,S as te,I as se,J as ke,_ as L,n as U,l as pe,h as j,K as Te,i as le,L as Qe,y as Ee,M as G,N as et,O as Se,P as A,Q as tt,w as Ue,g as ot,f as Ae,R as Ce,r as He,T as Le,U as at,V as Oe,W as lt,X as nt}from"./index-KPShGsqr.js";import{e as $,a9 as K,m as f,o as u,h as T,s as e,W as R,j as oe,U as x,O as k,$ as P,v as fe,Y as ae,Z as O,P as n,l as o,k as v,I as st,N as Q,r as W,f as Be,x as Y,ac as re,n as X,B as De,_ as H,ad as We,ae as Me,af as rt,a0 as qe,p as we,a7 as ne,V as I,a1 as Ke,a2 as je,X as ze,ag as ut,ah as Ne,ai as ct,aj as Re,ak as Xe,ab as it,C as dt,al as mt,i as Fe}from"./vue-BZJL1-P9.js";import{_ as pt,D as ft}from"./darkSwitch-B_mqpYMx.js";import{c as _t,o as Pe,g as Ie,r as me,s as vt,a as yt}from"./router-CsHEl4b_.js";import{I as gt,s as ie}from"./index-Bu_rpr0j.js";import{t as bt}from"./useDark-CX_C7K3k.js";import{a as ht,i as Ct}from"./index-D28fPKf-.js";import{F as de}from"./index-B3Hzgth0.js";import"./index-DkzA5vqp.js";const kt={class:"layout-logo"},wt={key:0,class:"logo-img",src:pt,alt:"logo"},xt=$({__name:"logo",setup(w){K(i=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=E(),l=xe(),r=function(){t.layout.shrink&&!t.layout.menuCollapse&&_t(),t.setLayout("menuCollapse",!t.layout.menuCollapse),te.set(se,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{ke()},350)};return(i,s)=>{const y=f("Icon");return u(),T("div",kt,[e(t).layout.menuCollapse?R("",!0):(u(),T("img",wt)),e(t).layout.menuCollapse?R("",!0):(u(),T("div",{key:1,style:oe({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},x(e(l).siteName),5)),e(t).layout.layoutMode!="Streamline"?(u(),k(y,{key:2,onClick:r,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:P([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):R("",!0)])}}}),Ye=L(xt,[["__scopeId","data-v-38fd2478"]]),Tt=$({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(w){K(s=>({"5010b154":e(l).getColorVal("menuActiveBackground")}));const{t}=fe.useI18n(),l=E(),r=w,i=s=>{var y,c;if(((y=r.extends)==null?void 0:y.position)=="horizontal"&&r.extends.level<=1&&((c=s.children)!=null&&c.length)){const m=Ie(s.children);m?Pe(m):st({type:"error",message:t("utils.No child menu to jump to!")})}};return(s,y)=>{const c=f("Icon"),m=f("menu-tree",!0),g=f("el-sub-menu"),C=f("el-menu-item");return u(!0),T(O,null,ae(r.menus,d=>(u(),T(O,null,[d.children&&d.children.length>0?(u(),k(g,{onClick:a=>i(d),index:d.path,key:d.path},{title:n(()=>{var a,p,B,V;return[o(c,{color:e(l).getColorVal("menuColor"),name:(a=d.meta)!=null&&a.icon?(p=d.meta)==null?void 0:p.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),v("span",null,x((B=d.meta)!=null&&B.title?(V=d.meta)==null?void 0:V.title:s.$t("noTitle")),1)]}),default:n(()=>[o(m,{extends:{...r.extends,level:r.extends.level+1},menus:d.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(u(),k(C,{index:d.path,key:d.path,onClick:a=>e(Pe)(d)},{default:n(()=>{var a,p,B,V;return[o(c,{color:e(l).getColorVal("menuColor"),name:(a=d.meta)!=null&&a.icon?(p=d.meta)==null?void 0:p.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),v("span",null,x((B=d.meta)!=null&&B.title?(V=d.meta)==null?void 0:V.title:s.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}}),_e=L(Tt,[["__scopeId","data-v-99fc3008"]]),St=$({__name:"menuVertical",setup(w){K(m=>({"31f3c86a":s.value,"7a042cf1":e(t).getColorVal("menuBackground"),"8461db24":e(t).getColorVal("menuColor"),"29aca588":e(t).getColorVal("menuActiveColor")}));const t=E(),l=U(),r=Q(),i=W({defaultActive:""}),s=Be(()=>{let m=0;return t.layout.menuShowTopBar&&(m=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+m)+"px)":"calc(100vh - "+m+"px)"}),y=m=>{i.defaultActive=m.path},c=()=>{X(()=>{var g;let m=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!m)return!1;(g=j.value)==null||g.setScrollTop(m.offsetTop)})};return Y(()=>{y(r),c()}),re(m=>{y(m)}),(m,g)=>{const C=f("el-menu"),d=f("el-scrollbar");return u(),k(d,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"vertical-menus-scrollbar"},{default:n(()=>[o(C,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":i.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:pe},{default:n(()=>[o(_e,{menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Ve=(w,t)=>{for(let l=0;l<t.length;l++){const r=t[l];if(r.path==w||r.children&&r.children.length>0&&Ve(w,r.children))return r}return!1},Bt=$({__name:"menuVerticalChildren",setup(w){K(m=>({"3ef6a352":s.value,"09919fd9":e(t).getColorVal("menuBackground"),"45e122f4":e(t).getColorVal("menuColor"),e864e0c0:e(t).getColorVal("menuActiveColor")}));const t=E(),l=U(),r=Q(),i=W({defaultActive:"",routeChildren:[]}),s=Be(()=>{let m=0;return t.layout.menuShowTopBar&&(m=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+m)+"px)":"calc(100vh - "+m+"px)"}),y=m=>{let g=Ve(m.path,l.state.tabsViewRoutes);g?(i.defaultActive=m.path,g.children&&g.children.length>0?i.routeChildren=g.children:i.routeChildren=[g]):i.routeChildren||(i.routeChildren=l.state.tabsViewRoutes)},c=()=>{X(()=>{var g;let m=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!m)return!1;(g=j.value)==null||g.setScrollTop(m.offsetTop)})};return Y(()=>{y(r),c(),new Te(j.value.wrapRef)}),re(m=>{y(m)}),(m,g)=>{const C=f("el-menu"),d=f("el-scrollbar");return u(),k(d,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"children-vertical-menus-scrollbar"},{default:n(()=>[o(C,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":i.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:pe},{default:n(()=>[i.routeChildren.length>0?(u(),k(_e,{key:0,menus:i.routeChildren},null,8,["menus"])):R("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Mt=$({name:"layout/aside",__name:"aside",setup(w){K(i=>({"12d2a223":r.value}));const t=E(),l=U(),r=Be(()=>t.menuWidth());return(i,s)=>{const y=f("el-aside");return e(l).state.tabFullScreen?R("",!0):(u(),k(y,{key:0,class:P("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:n(()=>[e(t).layout.menuShowTopBar?(u(),k(Ye,{key:0})):R("",!0),e(t).layout.layoutMode=="Double"?(u(),k(Bt,{key:1})):(u(),k(St,{key:2}))]),_:1},8,["class"]))}}}),$e=L(Mt,[["__scopeId","data-v-be977e32"]]);function Je(){if(!De())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:w}=De();return{proxy:w.config.globalProperties}}const Rt={class:"el-dropdown-menu"},It=["onClick"],Vt=$({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(w,{expose:t,emit:l}){const r=w,i=l,s=W({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),y=(g,C)=>{s.showArrow=!0,s.sourceData=g;const d=document.documentElement.clientHeight-C.y-(r.items.length*40+20),a=document.documentElement.clientWidth-C.x-(r.width+20);d<0&&(C.y+=d,s.showArrow=!1),a<0&&(C.x+=a,s.showArrow=!1),s.axis=C,s.show=!0},c=()=>{s.show=!1,i("hideContextmenu")},m=g=>{g.disabled||(g.sourceData=rt(s.sourceData),i("menuClick",g))};return t({onShowContextmenu:y,onHideContextmenu:c}),Y(()=>{le(document,"click",c),le(document,"scroll",c),le(document,"keydown",g=>{g.key==="Escape"&&c()})}),(g,C)=>{const d=f("Icon");return u(),k(Me,{name:"el-zoom-in-center"},{default:n(()=>[H((u(),T("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:oe(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${r.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[v("ul",Rt,[(u(!0),T(O,null,ae(r.items,(a,p)=>(u(),T("li",{key:p,class:P(["el-dropdown-menu__item",a.disabled?"is-disabled":""]),tabindex:"-1",onClick:B=>m(a)},[o(d,{size:"12",name:a.icon},null,8,["name"]),v("span",null,x(a.label),1)],10,It))),128))]),s.showArrow?(u(),T("span",{key:0,class:"el-popper__arrow",style:oe({left:`${s.arrowAxis}px`})},null,4)):R("",!0)],4)),[[We,s.show]])]),_:1})}}}),$t=L(Vt,[["__scopeId","data-v-0380e8de"]]),At=["onClick","onContextmenu"],Lt=$({__name:"tabs",setup(w,{expose:t}){K(_=>({"6ffb9aa0":e(i).getColorVal("headerBarTabColor"),"2739e76c":e(i).getColorVal("headerBarTabActiveColor"),"74c381b3":e(i).layout.layoutMode=="Default"?"none":e(i).getColorVal("headerBarBackground")}));const l=Q(),r=qe(),i=E(),s=U(),{proxy:y}=Je(),c=we(),m=Qe(),g=we(),C=W({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),d=W({width:"0",transform:"translateX(0px)"}),a=_=>{r.push(_)},p=function(_){if(!_)return!1;d.width=_.clientWidth+"px",d.transform=`translateX(${_.offsetLeft}px)`;let S=_.offsetLeft+_.clientWidth-c.value.clientWidth;_.offsetLeft<c.value.scrollLeft?c.value.scrollTo(_.offsetLeft,0):S>c.value.scrollLeft&&c.value.scrollTo(S,0)},B=()=>{const _=s.state.tabsView.slice(-1)[0];_?r.push(_):r.push(Ee)},V=_=>{var S;s._closeTab(_),y.eventBus.emit("onTabViewClose",_),((S=s.state.activeRoute)==null?void 0:S.path)===_.path?B():(s._setActiveRoute(s.state.activeRoute),X(()=>{p(m.value[s.state.activeIndex])})),g.value.onHideContextmenu()},M=_=>{var S;s._closeTabs(_),s._setActiveRoute(_),((S=s.state.activeRoute)==null?void 0:S.path)!==l.path&&r.push(_.path)},F=_=>{var D;let S=Ie(s.state.tabsViewRoutes);if(_&&S&&S.path==_.path)return M(_);if(S&&S.path==((D=s.state.activeRoute)==null?void 0:D.path))return M(s.state.activeRoute);s._closeTabs(!1),S&&me(S.path)},J=(_,S)=>{C.contextmenuItems[0].disabled=l.path!==_.path,C.contextmenuItems[4].disabled=C.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:D,clientY:N}=S;g.value.onShowContextmenu(_,{x:D,y:N})},z=_=>{const{name:S,sourceData:D}=_;if(D)switch(S){case"refresh":y.eventBus.emit("onTabViewRefresh",D);break;case"close":V(D);break;case"closeOther":M(D);break;case"closeAll":F(D);break;case"fullScreen":l.path!==D.path&&r.push(D.path),s.setFullScreen(!0);break}},q=function(_){s._addTab(_),s._setActiveRoute(_),X(()=>{p(m.value[s.state.activeIndex])})};return re(async _=>{q(_)}),Y(()=>{q(r.currentRoute.value),new Te(c.value)}),t({closeAllTab:F,closeTabByPath:_=>{for(const S in s.state.tabsView)if(s.state.tabsView[S].path==_){V(s.state.tabsView[S]);break}},updateTabTitle:(_,S)=>{s._updateTabTitle(_,S),X(()=>{p(m.value[s.state.activeIndex])})}}),(_,S)=>{const D=f("Icon");return u(),T("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:c},[(u(!0),T(O,null,ae(e(s).state.tabsView,(N,h)=>(u(),T("div",{onClick:b=>a(N),onContextmenu:ne(b=>J(N,b),["prevent"]),class:P(["ba-nav-tab",e(s).state.activeIndex==h?"active":""]),ref_for:!0,ref:e(m).set,key:h},[I(x(N.meta.title)+" ",1),o(Me,{onAfterLeave:S[0]||(S[0]=b=>p(e(m)[e(s).state.activeIndex])),name:"el-fade-in"},{default:n(()=>[H(o(D,{class:"close-icon",onClick:ne(b=>V(N),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[We,e(s).state.tabsView.length>1]])]),_:2},1024)],42,At))),128)),v("div",{style:oe(d),class:"nav-tabs-active-box"},null,4),o($t,{ref_key:"contextmenuRef",ref:g,items:C.contextmenuItems,onMenuClick:z},null,8,["items"])],512)}}}),Ze=L(Lt,[["__scopeId","data-v-4dd088a8"]]),ve=w=>(Ke("data-v-06c3bb38"),w=w(),je(),w),Dt={class:"layout-config-drawer"},zt={class:"layout-mode-styles-box"},Nt={class:"layout-mode-box-style"},Ft=ve(()=>v("div",{class:"layout-mode-style-box"},[v("div",{class:"layout-mode-style-aside"}),v("div",{class:"layout-mode-style-container-box"},[v("div",{class:"layout-mode-style-header"}),v("div",{class:"layout-mode-style-container"})])],-1)),Pt={class:"layout-mode-style-name"},Et=ve(()=>v("div",{class:"layout-mode-style-box"},[v("div",{class:"layout-mode-style-aside"}),v("div",{class:"layout-mode-style-container-box"},[v("div",{class:"layout-mode-style-header"}),v("div",{class:"layout-mode-style-container"})])],-1)),Ut={class:"layout-mode-style-name"},Ht=ve(()=>v("div",{class:"layout-mode-style-box"},[v("div",{class:"layout-mode-style-container-box"},[v("div",{class:"layout-mode-style-header"}),v("div",{class:"layout-mode-style-container"})])],-1)),Ot={class:"layout-mode-style-name"},Wt=ve(()=>v("div",{class:"layout-mode-style-box"},[v("div",{class:"layout-mode-style-aside"}),v("div",{class:"layout-mode-style-container-box"},[v("div",{class:"layout-mode-style-header"}),v("div",{class:"layout-mode-style-container"})])],-1)),qt={class:"layout-mode-style-name"},Kt={class:"layout-config-global"},jt={class:"layout-config-aside"},Xt={class:"layout-config-aside"},Yt={class:"ba-center"},Jt=$({__name:"config",setup(w){const{t}=fe.useI18n(),l=E(),r=U(),i=qe(),s=(d,a)=>{l.setLayout(a,d)},y=(d,a)=>{if(d===null)return;const p=l.layout[a];l.layout.isDark?p[1]=d:p[0]=d,l.setLayout(a,p)},c=d=>{te.set(se,{layoutMode:d,menuCollapse:l.layout.menuCollapse}),l.setLayoutMode(d)},m=(d,a)=>{l.setLayout(a,d);const p=r.state.tabsViewRoutes;r.setTabsViewRoutes([]),setTimeout(()=>{r.setTabsViewRoutes(p)},200)},g=()=>{l.setLayout("showDrawer",!1)},C=()=>{G.remove(et),te.remove(se),i.go(0)};return(d,a)=>{const p=f("el-divider"),B=f("el-col"),V=f("el-row"),M=f("el-form-item"),F=f("el-option"),J=f("el-select"),z=f("el-color-picker"),q=f("el-switch"),Z=f("el-input"),ee=f("el-button"),_=f("el-popconfirm"),S=f("el-form"),D=f("el-scrollbar"),N=f("el-drawer");return u(),T("div",Dt,[o(N,{"model-value":e(l).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:g},{default:n(()=>[o(D,{class:"layout-mode-style-scrollbar"},{default:n(()=>[o(S,{ref:"formRef",model:e(l).layout},{default:n(()=>[v("div",zt,[o(p,{"border-style":"dashed"},{default:n(()=>[I(x(e(t)("layouts.Layout mode")),1)]),_:1}),v("div",Nt,[o(V,{class:"layout-mode-box-style-row",gutter:10},{default:n(()=>[o(B,{span:12},{default:n(()=>[v("div",{onClick:a[0]||(a[0]=h=>c("Default")),class:P(["layout-mode-style default",e(l).layout.layoutMode=="Default"?"active":""])},[Ft,v("div",Pt,x(e(t)("layouts.default")),1)],2)]),_:1}),o(B,{span:12},{default:n(()=>[v("div",{onClick:a[1]||(a[1]=h=>c("Classic")),class:P(["layout-mode-style classic",e(l).layout.layoutMode=="Classic"?"active":""])},[Et,v("div",Ut,x(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),o(V,{gutter:10},{default:n(()=>[o(B,{span:12},{default:n(()=>[v("div",{onClick:a[2]||(a[2]=h=>c("Streamline")),class:P(["layout-mode-style streamline",e(l).layout.layoutMode=="Streamline"?"active":""])},[Ht,v("div",Ot,x(e(t)("layouts.Single column")),1)],2)]),_:1}),o(B,{span:12},{default:n(()=>[v("div",{onClick:a[3]||(a[3]=h=>c("Double")),class:P(["layout-mode-style double",e(l).layout.layoutMode=="Double"?"active":""])},[Wt,v("div",qt,x(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),o(p,{"border-style":"dashed"},{default:n(()=>[I(x(e(t)("layouts.overall situation")),1)]),_:1}),v("div",Kt,[o(M,{size:"large",label:e(t)("layouts.Dark mode")},{default:n(()=>[o(ft,{onClick:a[4]||(a[4]=h=>e(bt)())})]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Background page switching animation")},{default:n(()=>[o(J,{onChange:a[5]||(a[5]=h=>s(h,"mainAnimation")),"model-value":e(l).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:n(()=>[o(F,{label:"slide-right",value:"slide-right"}),o(F,{label:"slide-left",value:"slide-left"}),o(F,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),o(F,{label:"el-fade-in",value:"el-fade-in"}),o(F,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),o(F,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),o(F,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),o(p,{"border-style":"dashed"},{default:n(()=>[I(x(e(t)("layouts.sidebar")),1)]),_:1}),v("div",jt,[o(M,{label:e(t)("layouts.Side menu bar background color")},{default:n(()=>[o(z,{onChange:a[6]||(a[6]=h=>y(h,"menuBackground")),"model-value":e(l).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu text color")},{default:n(()=>[o(z,{onChange:a[7]||(a[7]=h=>y(h,"menuColor")),"model-value":e(l).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu active item background color")},{default:n(()=>[o(z,{onChange:a[8]||(a[8]=h=>y(h,"menuActiveBackground")),"model-value":e(l).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu active item text color")},{default:n(()=>[o(z,{onChange:a[9]||(a[9]=h=>y(h,"menuActiveColor")),"model-value":e(l).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:n(()=>[o(q,{onChange:a[10]||(a[10]=h=>s(h,"menuShowTopBar")),"model-value":e(l).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu top bar background color")},{default:n(()=>[o(z,{onChange:a[11]||(a[11]=h=>y(h,"menuTopBarBackground")),"model-value":e(l).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu width (when expanded)")},{default:n(()=>[o(Z,{onInput:a[12]||(a[12]=h=>s(h,"menuWidth")),type:"number",step:10,"model-value":e(l).layout.menuWidth},{append:n(()=>[I("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu default icon")},{default:n(()=>[o(gt,{onChange:a[13]||(a[13]=h=>m(h,"menuDefaultIcon")),"model-value":e(l).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu horizontal collapse")},{default:n(()=>[o(q,{onChange:a[14]||(a[14]=h=>s(h,"menuCollapse")),"model-value":e(l).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Side menu accordion")},{default:n(()=>[o(q,{onChange:a[15]||(a[15]=h=>s(h,"menuUniqueOpened")),"model-value":e(l).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),o(p,{"border-style":"dashed"},{default:n(()=>[I(x(e(t)("layouts.Top bar")),1)]),_:1}),v("div",Xt,[o(M,{label:e(t)("layouts.Top bar background color")},{default:n(()=>[o(z,{onChange:a[16]||(a[16]=h=>y(h,"headerBarBackground")),"model-value":e(l).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Top bar text color")},{default:n(()=>[o(z,{onChange:a[17]||(a[17]=h=>y(h,"headerBarTabColor")),"model-value":e(l).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:n(()=>[o(z,{onChange:a[18]||(a[18]=h=>y(h,"headerBarHoverBackground")),"model-value":e(l).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Top bar menu active item background color")},{default:n(()=>[o(z,{onChange:a[19]||(a[19]=h=>y(h,"headerBarTabActiveBackground")),"model-value":e(l).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(M,{label:e(t)("layouts.Top bar menu active item text color")},{default:n(()=>[o(z,{onChange:a[20]||(a[20]=h=>y(h,"headerBarTabActiveColor")),"model-value":e(l).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),o(_,{onConfirm:C,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:n(()=>[v("div",Yt,[o(ee,{class:"w80",type:"info"},{default:n(()=>[I(x(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),Zt=L(Jt,[["__scopeId","data-v-06c3bb38"]]),Gt={class:"command"},Qt={class:"task-opt"},eo=["onClick"],to={class:"terminal-buttons"},oo={class:"config-buttons"},ao=$({__name:"index",setup(w){const{t}=fe.useI18n(),l=Se(),r=we(),i=W({registryLoading:!1,registryLoadingType:"npm",packageManagerLoading:!1}),s=d=>{let a=t("terminal.unknown"),p="info";switch(d){case A.Waiting:a=t("terminal.Waiting for execution"),p="info";break;case A.Connecting:a=t("terminal.Connecting"),p="warning";break;case A.Executing:a=t("terminal.Executing"),p="warning";break;case A.Success:a=t("terminal.Successful execution"),p="success";break;case A.Failed:a=t("terminal.Execution failed"),p="danger";break;case A.Unknown:a=t("terminal.Unknown execution result"),p="danger";break}return{statusText:a,statusType:p}},y=(d,a,p=!0)=>{a?l.addTaskPM(d,p):l.addTask(d,p),X(()=>{r.value&&r.value.wrapRef&&r.value.setScrollTop(r.value.wrapRef.scrollHeight)})},c=()=>{Ne.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{y("web-build",!0)})},m=d=>{i.packageManagerLoading=!0,tt({manager:d}).then(a=>{a.code==1&&l.changePackageManager(d)}).finally(()=>{i.packageManagerLoading=!1})},g=(d,a)=>{const p=a=="npm"?l.state.npmRegistry:l.state.composerRegistry;l.changeRegistry(d,a),i.registryLoading=!0,i.registryLoadingType=a,l.addTask(`set-${a}-registry.${d}`,!1,"",B=>{i.registryLoading=!1,(B==A.Failed||B==A.Unknown)&&Ne.confirm(t("terminal.Failed to modify the source command, Please try again manually"),t("Reminder"),{confirmButtonText:t("Confirm"),showCancelButton:!1,type:"warning"}).then(()=>{l.changeRegistry(p,a)})})},C=d=>{let a={};return d=="npm"?a={npm:"npm",taobao:"taobao",tencent:"tencent"}:d=="composer"&&(a={composer:"composer",huawei:"huawei",aliyun:"aliyun",tencent:"tencent",kkame:"kkame"}),l.state[d=="npm"?"npmRegistry":"composerRegistry"]=="unknown"&&(a.unknown=t("Unknown")),a};return(d,a)=>{const p=f("el-alert"),B=f("el-tag"),V=f("el-button"),M=f("Icon"),F=f("el-card"),J=f("el-timeline-item"),z=f("el-timeline"),q=f("el-empty"),Z=f("el-dropdown-item"),ee=f("el-dropdown-menu"),_=f("el-dropdown"),S=f("el-dialog"),D=f("el-form"),N=ze("blur"),h=ze("loading");return u(),T("div",null,[o(S,{modelValue:e(l).state.show,"onUpdate:modelValue":a[6]||(a[6]=b=>e(l).state.show=b),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog main-dialog"},{default:n(()=>[o(e(ut),{ref_key:"terminalScrollbarRef",ref:r,"max-height":500,class:"terminal-scrollbar"},{default:n(()=>[e(l).state.phpDevelopmentServer?R("",!0):(u(),k(p,{key:0,class:"terminal-warning-alert",title:e(t)("terminal.The current terminal is not running under the installation service, and some commands may not be executed"),type:"error"},null,8,["title"])),e(l).state.taskList.length?(u(),k(z,{key:1,class:"terminal-timeline"},{default:n(()=>[(u(!0),T(O,null,ae(e(l).state.taskList,(b,ue)=>(u(),k(J,{key:ue,class:P(["task-item","task-status-"+b.status]),type:s(b.status).statusType,center:"",timestamp:b.createTime,placement:"top"},{default:n(()=>[o(F,null,{default:n(()=>[v("div",null,[o(B,{type:s(b.status).statusType},{default:n(()=>[I(x(s(b.status).statusText),1)]),_:2},1032,["type"]),(b.status==e(A).Failed||b.status==e(A).Unknown)&&b.blockOnFailure?(u(),k(B,{key:0,class:"block-on-failure-tag",type:"warning"},{default:n(()=>[I(x(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):R("",!0),b.status==e(A).Executing||b.status==e(A).Connecting?(u(),k(B,{key:1,class:"block-on-failure-tag",type:"danger"},{default:n(()=>[I(x(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):R("",!0),v("span",Gt,x(b.command),1),v("div",Qt,[b.status==e(A).Failed||b.status==e(A).Unknown?H((u(),k(V,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ce=>e(l).retryTask(ue)},null,8,["title","onClick"])),[[N]]):R("",!0),H(o(V,{onClick:ce=>e(l).delTask(ue),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[N]])])]),b.status!=e(A).Waiting?(u(),T(O,{key:0},[b.status!=e(A).Connecting&&b.status!=e(A).Executing?(u(),T("div",{key:0,onClick:ce=>e(l).setTaskShowMessage(ue),class:"toggle-message-display"},[v("span",null,x(e(t)("terminal.Command run log")),1),o(M,{name:b.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,eo)):R("",!0),b.status==e(A).Connecting||b.status==e(A).Executing||b.status>e(A).Executing&&b.showMessage?(u(),T("div",{key:1,class:P(["exec-message","exec-message-"+b.uuid])},[(u(!0),T(O,null,ae(b.message,(ce,Ge)=>(u(),T("pre",{key:Ge,class:"message-item"},x(ce),1))),128))],2)):R("",!0)],64)):R("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(u(),k(q,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"]))]),_:1},512),v("div",to,[H((u(),k(V,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:a[0]||(a[0]=b=>y("test",!0,!1))},{default:n(()=>[I(x(e(t)("terminal.Test command")),1)]),_:1})),[[N]]),o(_,{class:"terminal-menu-item"},{dropdown:n(()=>[o(ee,null,{default:n(()=>[e(l).state.packageManager!="none"?(u(),k(Z,{key:0,onClick:a[1]||(a[1]=b=>y("web-install",!0))},{default:n(()=>[I(x(e(l).state.packageManager)+" run install ",1)]),_:1})):R("",!0),o(Z,{onClick:a[2]||(a[2]=b=>y("composer.update",!1))},{default:n(()=>[I("composer update")]),_:1})]),_:1})]),default:n(()=>[H((u(),k(V,{icon:"el-icon-Download"},{default:n(()=>[I(x(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[N]])]),_:1}),H((u(),k(V,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:a[3]||(a[3]=b=>c())},{default:n(()=>[I(x(e(t)("terminal.Republish")),1)]),_:1})),[[N]]),H((u(),k(V,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:a[4]||(a[4]=b=>e(l).clearSuccessTask())},{default:n(()=>[I(x(e(t)("terminal.Clean up task list")),1)]),_:1})),[[N]]),H((u(),k(V,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:a[5]||(a[5]=b=>e(l).toggleConfigDialog())},{default:n(()=>[I(x(e(t)("terminal.Terminal settings")),1)]),_:1})),[[N]])])]),_:1},8,["modelValue","title"]),o(S,{onClose:a[8]||(a[8]=b=>e(l).toggleConfigDialog(!1)),"model-value":e(l).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:n(()=>[o(D,{"label-position":"left","label-width":"140"},{default:n(()=>[H((u(),k(de,{label:"NPM "+e(t)("terminal.Source"),"model-value":e(l).state.npmRegistry,key:e(l).state.npmRegistry,type:"select","input-attr":{border:!0,content:C("npm"),teleported:!1,onChange:b=>g(b,"npm")}},null,8,["label","model-value","input-attr"])),[[h,i.registryLoading&&i.registryLoadingType=="npm"]]),H((u(),k(de,{label:"Composer "+e(t)("terminal.Source"),"model-value":e(l).state.composerRegistry,key:e(l).state.composerRegistry,type:"select","input-attr":{border:!0,content:C("composer"),teleported:!1,onChange:b=>g(b,"composer")}},null,8,["label","model-value","input-attr"])),[[h,i.registryLoading&&i.registryLoadingType=="composer"]]),H(o(de,{label:e(t)("terminal.NPM package manager"),"model-value":e(l).state.packageManager,type:"select","input-attr":{border:!0,content:{npm:"NPM",cnpm:"CNPM",pnpm:"PNPM",yarn:"YARN",ni:"NI",none:e(t)("terminal.Manual execution")},teleported:!1,onChange:b=>m(b)},tip:e(t)("terminal.NPM package manager tip")},null,8,["label","model-value","input-attr","tip"]),[[h,i.packageManagerLoading]]),o(de,{label:e(t)("terminal.Clear successful task"),"model-value":e(l).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(l).changeAutomaticCleanupTask},tip:e(t)("terminal.Clear successful task tip")},null,8,["label","model-value","input-attr","tip"])]),_:1}),v("div",oo,[o(V,{onClick:a[7]||(a[7]=b=>e(l).toggleConfigDialog(!1))},{default:n(()=>[I(x(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])])}}}),lo=L(ao,[["__scopeId","data-v-a1dacae3"]]),no={class:"nav-menu-item"},so=["src"],ro={class:"admin-name"},uo={class:"admin-info-base"},co=["src"],io={class:"admin-info-other"},mo={class:"admin-info-name"},po={class:"admin-info-lasttime"},fo={class:"admin-info-footer"},_o=$({__name:"navMenus",setup(w){K(a=>({"02d4915c":e(r).getColorVal("headerBarBackground"),"548ea232":e(r).getColorVal("headerBarTabColor"),"40e44a14":e(r).getColorVal("headerBarHoverBackground")}));const{t}=fe.useI18n(),l=Ue(),r=E(),i=Se(),s=xe(),y=W({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),c=(a,p)=>{y.currentNavMenu=a?p:""},m=()=>{if(!ie.isEnabled)return ct.warning(t("layouts.Full screen is not supported")),!1;ie.toggle(),ie.onchange(()=>{y.isFullScreen=ie.isFullscreen})},g=()=>{y.showAdminInfoPopover=!1,me({name:"routine/adminInfo"})},C=()=>{ht().then(()=>{G.remove(Ce),He.go(0)})},d=a=>{if(a=="storage"||a=="all"){const p=G.get(Ce),B=G.get(Le);if(te.clear(),G.clear(),G.set(Ce,p),G.set(Le,B),a=="storage")return}at(a).then(()=>{})};return(a,p)=>{const B=f("Icon"),V=f("router-link"),M=f("el-dropdown-item"),F=f("el-dropdown-menu"),J=f("el-dropdown"),z=f("el-badge"),q=f("el-avatar"),Z=f("el-button"),ee=f("el-popover");return u(),T("div",{class:P(["nav-menus",e(r).layout.layoutMode])},[o(V,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:n(()=>[v("div",no,[o(B,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),o(J,{onVisibleChange:p[0]||(p[0]=_=>c(_,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(F,{class:"dropdown-menu-box"},{default:n(()=>[(u(!0),T(O,null,ae(e(r).lang.langArray,_=>(u(),k(M,{key:_.name,onClick:S=>e(ot)(_.name)},{default:n(()=>[I(x(_.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:n(()=>[v("div",{class:P(["nav-menu-item pt2",y.currentNavMenu=="lang"?"hover":""])},[o(B,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),v("div",{onClick:m,class:P(["nav-menu-item",y.isFullScreen?"hover":""])},[y.isFullScreen?(u(),k(B,{key:0,color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(u(),k(B,{key:1,color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(l).super?(u(),T("div",{key:0,onClick:p[1]||(p[1]=_=>e(i).toggle()),class:"nav-menu-item pt2"},[o(z,{"is-dot":e(i).state.showDot},{default:n(()=>[o(B,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):R("",!0),e(l).super?(u(),k(J,{key:1,onVisibleChange:p[5]||(p[5]=_=>c(_,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(F,{class:"dropdown-menu-box"},{default:n(()=>[o(M,{onClick:p[2]||(p[2]=_=>d("tp"))},{default:n(()=>[I(x(e(t)("utils.Clean up system cache")),1)]),_:1}),o(M,{onClick:p[3]||(p[3]=_=>d("storage"))},{default:n(()=>[I(x(e(t)("utils.Clean up browser cache")),1)]),_:1}),o(M,{onClick:p[4]||(p[4]=_=>d("all")),divided:""},{default:n(()=>[I(x(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:n(()=>[v("div",{class:P(["nav-menu-item",y.currentNavMenu=="clear"?"hover":""])},[o(B,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):R("",!0),e(s).userInitialize?(u(),k(ee,{key:2,onShow:p[6]||(p[6]=_=>c(!0,"adminInfo")),onHide:p[7]||(p[7]=_=>c(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:y.showAdminInfoPopover,"onUpdate:visible":p[8]||(p[8]=_=>y.showAdminInfoPopover=_)},{reference:n(()=>[v("div",{class:P(["admin-info",y.currentNavMenu=="adminInfo"?"hover":""])},[o(q,{size:25,fit:"fill"},{default:n(()=>[v("img",{src:e(Ae)(e(l).avatar),alt:""},null,8,so)]),_:1}),v("div",ro,x(e(l).nickname),1)],2)]),default:n(()=>[v("div",null,[v("div",uo,[o(q,{size:70,fit:"fill"},{default:n(()=>[v("img",{src:e(Ae)(e(l).avatar),alt:""},null,8,co)]),_:1}),v("div",io,[v("div",mo,x(e(l).nickname),1),v("div",po,x(e(l).last_login_time),1)])]),v("div",fo,[o(Z,{onClick:g,type:"primary",plain:""},{default:n(()=>[I(x(e(t)("layouts.personal data")),1)]),_:1}),o(Z,{onClick:C,type:"danger",plain:""},{default:n(()=>[I(x(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1},8,["visible"])):R("",!0),v("div",{onClick:p[9]||(p[9]=_=>e(r).setLayout("showDrawer",!0)),class:"nav-menu-item"},[o(B,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),o(Zt),o(lo)],2)}}}),ye=L(_o,[["__scopeId","data-v-3c79f356"]]),vo={class:"nav-bar"},yo=$({__name:"default",setup(w){K(l=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=E();return(l,r)=>(u(),T("div",vo,[o(Ze,{ref_key:"layoutNavTabsRef",ref:Oe},null,512),o(ye)]))}}),go=L(yo,[["__scopeId","data-v-528ceb49"]]),bo={class:"nav-bar"},ho={key:0,class:"unfold"},Co=$({__name:"classic",setup(w){K(r=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=E(),l=()=>{vt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(r,i)=>{const s=f("Icon");return u(),T("div",bo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(u(),T("div",ho,[o(s,{onClick:l,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):R("",!0),e(t).layout.shrink?R("",!0):(u(),k(Ze,{key:1,ref_key:"layoutNavTabsRef",ref:Oe},null,512)),o(ye)])}}}),ko=L(Co,[["__scopeId","data-v-952ef580"]]),wo={class:"layouts-menu-horizontal"},xo={key:0,class:"menu-horizontal-logo"},To=$({__name:"menuHorizontal",setup(w){K(c=>({"060392df":e(t).getColorVal("headerBarHoverBackground"),"47fa1928":e(t).getColorVal("menuBackground"),"4f33c052":e(t).getColorVal("menuColor"),"1a744031":e(t).getColorVal("menuActiveColor"),"5354210e":e(t).getColorVal("menuActiveBackground")}));const t=E(),l=U(),r=Q(),i=W({defaultActive:""}),s=c=>{i.defaultActive=c.path},y=()=>{X(()=>{var m;let c=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!c)return!1;(m=j.value)==null||m.setScrollTop(c.offsetTop)})};return Y(()=>{s(r),y(),new Te(j.value.wrapRef)}),re(c=>{s(c)}),(c,m)=>{const g=f("el-menu"),C=f("el-scrollbar");return u(),T("div",wo,[e(t).layout.menuShowTopBar?(u(),T("div",xo,[o(Ye)])):R("",!0),o(C,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"horizontal-menus-scrollbar"},{default:n(()=>[o(g,{ref_key:"layoutMenuRef",ref:pe,class:"menu-horizontal",mode:"horizontal","default-active":i.defaultActive},{default:n(()=>[o(_e,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(ye)])}}}),So=L(To,[["__scopeId","data-v-e4aec161"]]),Bo={class:"layouts-menu-horizontal-double"},Mo=$({__name:"double",setup(w){K(c=>({de392686:e(t).getColorVal("menuBackground"),"3f822322":e(t).getColorVal("menuColor"),22954188:e(t).getColorVal("menuActiveColor"),"0e989e3a":e(t).getColorVal("menuActiveBackground")}));const t=E(),l=U(),r=Q(),i=W({defaultActive:""}),s=c=>{Ve(c.path,l.state.tabsViewRoutes)&&(i.defaultActive=c.path)},y=()=>{X(()=>{var m;let c=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!c)return!1;(m=j.value)==null||m.setScrollTop(c.offsetTop)})};return Y(()=>{s(r),y()}),re(c=>{s(c)}),(c,m)=>{const g=f("el-menu"),C=f("el-scrollbar");return u(),T("div",Bo,[o(C,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"double-menus-scrollbar"},{default:n(()=>[o(g,{ref_key:"layoutMenuRef",ref:pe,class:"menu-horizontal",mode:"horizontal","default-active":i.defaultActive},{default:n(()=>[o(_e,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(ye)])}}}),Ro=L(Mo,[["__scopeId","data-v-dbeaf8af"]]),Io=$({name:"layout/header",components:{DefaultNavBar:go,ClassicNavBar:ko,StreamlineNavBar:So,DoubleNavBar:Ro},__name:"header",setup(w){const t=E(),l=U();return(r,i)=>{const s=f("el-header");return e(l).state.tabFullScreen?R("",!0):(u(),k(s,{key:0,class:"layout-header"},{default:n(()=>[(u(),k(Re(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),ge=L(Io,[["__scopeId","data-v-9014eea9"]]),Vo=$({name:"layout/main",__name:"main",setup(w){const{proxy:t}=Je(),l=Q(),r=E(),i=U(),s=W({componentKey:l.path,keepAliveComponentNameList:[]}),y=function(c){if(c){if(s.keepAliveComponentNameList.find(g=>g===c))return;s.keepAliveComponentNameList.push(c)}};return Xe(()=>{t.eventBus.on("onTabViewRefresh",c=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(m=>c.meta.keepalive!==m),s.componentKey="",X(()=>{s.componentKey=c.path,y(c.meta.keepalive)})}),t.eventBus.on("onTabViewClose",c=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(m=>c.meta.keepalive!==m)})}),it(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),Y(()=>{var c,m;typeof((c=i.state.activeRoute)==null?void 0:c.meta.keepalive)=="string"&&y((m=i.state.activeRoute)==null?void 0:m.meta.keepalive)}),dt(()=>l.path,()=>{var c,m;s.componentKey=l.path,typeof((c=i.state.activeRoute)==null?void 0:c.meta.keepalive)=="string"&&y((m=i.state.activeRoute)==null?void 0:m.meta.keepalive)}),(c,m)=>{const g=f("router-view"),C=f("el-scrollbar"),d=f("el-main");return u(),k(d,{class:"layout-main"},{default:n(()=>[o(C,{class:"layout-main-scrollbar",style:oe(e(lt)),ref_key:"layoutMainScrollbarRef",ref:nt},{default:n(()=>[o(g,null,{default:n(({Component:a})=>[o(Me,{name:e(r).layout.mainAnimation,mode:"out-in"},{default:n(()=>[(u(),k(mt,{include:s.keepAliveComponentNameList},[(u(),k(Re(a),{key:s.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),be=L(Vo,[["__scopeId","data-v-ac20f97e"]]),$o=w=>(Ke("data-v-0aa634f1"),w=w(),je(),w),Ao=["title"],Lo=$o(()=>v("div",{class:"close-full-screen-on"},null,-1)),Do=$({__name:"closeFullScreen",setup(w){const t=U(),l=W({closeBoxTop:20});Y(()=>{setTimeout(()=>{l.closeBoxTop=-30},300)});const r=()=>{l.closeBoxTop=20},i=()=>{l.closeBoxTop=-30},s=()=>{t.setFullScreen(!1)};return(y,c)=>{const m=f("Icon");return u(),T("div",{title:y.$t("layouts.Exit full screen"),onMouseover:ne(r,["stop"]),onMouseout:ne(i,["stop"])},[v("div",{onClick:ne(s,["stop"]),class:"close-full-screen",style:oe({top:l.closeBoxTop+"px"})},[o(m,{name:"el-icon-Close"})],4),Lo],40,Ao)}}}),he=L(Do,[["__scopeId","data-v-0aa634f1"]]),zo=$({__name:"default",setup(w){const t=U();return(l,r)=>{const i=f("el-container");return u(),T(O,null,[o(i,{class:"layout-container"},{default:n(()=>[o($e),o(i,{class:"content-wrapper"},{default:n(()=>[o(ge),o(be)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),k(he,{key:0})):R("",!0)],64)}}}),No=L(zo,[["__scopeId","data-v-59d252c1"]]),Fo=$({__name:"classic",setup(w){const t=U();return(l,r)=>{const i=f("el-container");return u(),T(O,null,[o(i,{class:"layout-container"},{default:n(()=>[o($e),o(i,{class:"content-wrapper"},{default:n(()=>[o(ge),o(be)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),k(he,{key:0})):R("",!0)],64)}}}),Po=L(Fo,[["__scopeId","data-v-fb349671"]]),Eo=$({__name:"streamline",setup(w){const t=U();return(l,r)=>{const i=f("el-container");return u(),T(O,null,[o(i,{class:"layout-container"},{default:n(()=>[o(i,{class:"content-wrapper"},{default:n(()=>[o(ge),o(be)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),k(he,{key:0})):R("",!0)],64)}}}),Uo=L(Eo,[["__scopeId","data-v-fcdc1bd3"]]),Ho=$({__name:"double",setup(w){const t=U();return(l,r)=>{const i=f("el-container");return u(),T(O,null,[o(i,{class:"layout-container"},{default:n(()=>[o($e),o(i,{class:"content-wrapper"},{default:n(()=>[o(ge),o(be)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),k(he,{key:0})):R("",!0)],64)}}}),Oo=L(Ho,[["__scopeId","data-v-d08319bd"]]),Qo=$({components:{Default:No,Classic:Po,Streamline:Uo,Double:Oo},__name:"index",setup(w){const t=Se(),l=U(),r=E(),i=Q(),s=xe(),y=Ue(),c=W({autoMenuCollapseLock:!1});Y(()=>{if(!y.token)return He.push({name:"adminLogin"});m(),ke(),le(window,"resize",ke)}),Xe(()=>{g(),le(window,"resize",g)});const m=()=>{Ct().then(C=>{if(s.dataFill(C.data.siteConfig),t.changePackageManager(C.data.terminal.npmPackageManager),t.changePHPDevelopmentServer(C.data.terminal.phpDevelopmentServer),s.setInitialize(!0),Fe(C.data.adminInfo)||(y.dataFill(C.data.adminInfo),s.setUserInitialize(!0)),C.data.menus){if(yt(C.data.menus),i.params.to){const a=JSON.parse(i.params.to);if(a.path!=Ee){let p=Fe(a.query)?{}:a.query;me({path:a.path,query:p});return}}let d=Ie(l.state.tabsViewRoutes);d&&me(d.path)}})},g=()=>{let C={layoutMode:r.layout.layoutMode,menuCollapse:r.layout.menuCollapse},d=te.get(se);if(d||te.set(se,C),document.body.clientWidth<1024)c.autoMenuCollapseLock||(c.autoMenuCollapseLock=!0,r.setLayout("menuCollapse",!0)),r.setLayout("shrink",!0),r.setLayoutMode("Classic");else{c.autoMenuCollapseLock=!1;let p=d||C;r.setLayout("menuCollapse",p.menuCollapse),r.setLayout("shrink",!1),r.setLayoutMode(p.layoutMode)}};return(C,d)=>(u(),k(Re(e(r).layout.layoutMode)))}});export{Qo as default};
