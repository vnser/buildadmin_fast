import{e as j,p as A,ao as D,v as T,r as E,m as s,Y as b,o as u,P as V,Q as d,$ as v,h as K,W as h,V as w,s as e,k,j as U,l as r,a0 as M,a8 as H,a9 as L,X as Q}from"./vue-DFhsJZqQ.js";import{F as i}from"./index-64RmlQoR.js";import{e as R}from"./index-CPy2hEef.js";const X={class:"title"},Y=k("i",{class:"fa fa-trash-o"},null,-1),ee=j({__name:"popupForm",setup(G){const C=R(),c=A(),o=D("baTable"),{t:a}=T.useI18n(),x=()=>{o.form.items.goods_attr.push({payback_price:"",name:""})},$=y=>{let l=o.form.items.goods_attr[y];l.id&&(o.form.items.delattr||(o.form.items.delattr=[]),o.form.items.delattr.push(l)),o.form.items.goods_attr=o.form.items.goods_attr.filter((p,n)=>n!==y)},S=()=>{o.form.items.isattr=1,o.onSubmit(c.value)},f=E({price:[{required:!0,message:"请输入金额",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"change"}],product_classify_ids:[{required:!0,message:"请选择分类",trigger:"change"}],images:[{required:!0,message:"请选择产品图",trigger:"change"}],goods_attr_price:[{required:!0,message:"请添加回收属性价格",trigger:"change"}],goods_attr_name:[{required:!0,message:"请添加回收属性项",trigger:"change"}],goods_attr_unit:[{required:!0,message:"请添加回收属性项",trigger:"change"}]});return(y,l)=>{const p=s("el-button"),n=s("el-input"),g=s("el-form-item"),_=s("el-table-column"),q=s("el-table"),P=s("el-form"),F=s("el-scrollbar"),I=s("el-dialog"),z=b("drag"),B=b("zoom"),N=b("loading"),W=b("blur");return u(),V(I,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(o).form.operate),onClose:e(o).toggleForm,width:"50%"},{header:d(()=>[v((u(),K("div",X,[h(w(e(o).form.operate?e(a)(e(o).form.operate):""),1)])),[[z,[".ba-operate-dialog",".el-dialog__header"]],[B,".ba-operate-dialog"]])]),footer:d(()=>[k("div",{style:U("width: calc(100% - "+e(o).form.labelWidth/1.8+"px)")},[r(p,{onClick:l[9]||(l[9]=t=>e(o).toggleForm())},{default:d(()=>[h(w(e(a)("Cancel")),1)]),_:1}),v((u(),V(p,{loading:e(o).form.submitLoading,onClick:l[10]||(l[10]=t=>S(c.value)),type:"primary"},{default:d(()=>[h(w(e(o).form.operateIds&&e(o).form.operateIds.length>1?e(a)("Save and edit next item"):e(a)("Save")),1)]),_:1},8,["loading"])),[[W]])],4)]),default:d(()=>[v((u(),V(F,{class:"ba-table-form-scrollbar"},{default:d(()=>[k("div",{class:M(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:U(e(C).layout.shrink?"":"width: calc(100% - "+e(o).form.labelWidth/2+"px)")},[e(o).form.loading?Q("",!0):(u(),V(P,{key:0,ref_key:"formRef",ref:c,onSubmit:l[7]||(l[7]=H(()=>{},["prevent"])),onKeyup:l[8]||(l[8]=L(t=>e(o).onSubmit(c.value),["enter"])),model:e(o).form.items,"label-position":e(C).layout.shrink?"top":"right","label-width":e(o).form.labelWidth+"px",rules:f},{default:d(()=>[r(i,{label:e(a)("product.goods.title"),type:"string",modelValue:e(o).form.items.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).form.items.title=t),prop:"title",placeholder:e(a)("Please input field",{field:e(a)("product.goods.title")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(a)("product.goods.price"),type:"string",prop:"price",modelValue:e(o).form.items.price,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).form.items.price=t),placeholder:e(a)("Please input field",{field:e(a)("product.goods.price")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(a)("product.goods.core_param"),type:"string",prop:"core_param",modelValue:e(o).form.items.core_param,"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).form.items.core_param=t),placeholder:e(a)("Please input field",{field:e(a)("product.goods.core_param")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(a)("product.goods.product_classify_ids"),modelValue:e(o).form.items.product_classify_ids,"onUpdate:modelValue":l[3]||(l[3]=t=>e(o).form.items.product_classify_ids=t),prop:"product_classify_ids",type:"remoteSelects","input-attr":{pk:"mm_product_classify.id",field:"categories_batch_name",remoteUrl:"/admin/product.Classify/index?goods_select=1&isTree=true"},placeholder:e(a)("Please select field",{field:e(a)("product.goods.product_classify_ids")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(a)("product.goods.images"),type:"images",modelValue:e(o).form.items.images,"onUpdate:modelValue":l[4]||(l[4]=t=>e(o).form.items.images=t),blockHelp:"建议尺寸：1125x777",prop:"images"},null,8,["label","modelValue"]),r(i,{label:e(a)("product.goods.status"),type:"switch",modelValue:e(o).form.items.status,"onUpdate:modelValue":l[5]||(l[5]=t=>e(o).form.items.status=t),prop:"status","input-attr":{content:{0:e(a)("product.goods.status 0"),1:e(a)("product.goods.status 1")}}},null,8,["label","modelValue","input-attr"]),r(i,{label:e(a)("product.goods.weigh"),type:"number",prop:"weigh","input-attr":{step:1},modelValue:e(o).form.items.weigh,"onUpdate:modelValue":l[6]||(l[6]=t=>e(o).form.items.weigh=t),modelModifiers:{number:!0},placeholder:e(a)("Please input field",{field:e(a)("product.goods.weigh")})},null,8,["label","modelValue","placeholder"]),r(g,{label:"回收属性","label-position":"right",prop:"goods_attr"},{default:d(()=>[r(p,{onClick:x},{default:d(()=>[h("+ 增加")]),_:1}),r(q,{data:e(o).form.items.goods_attr,style:{width:"100%"}},{default:d(()=>[r(_,{prop:"name",label:"名称",width:"180"},{default:d(t=>[r(g,{prop:`goods_attr.${t.$index}.name`,rules:f.goods_attr_name},{default:d(()=>[r(n,{modelValue:t.row.name,"onUpdate:modelValue":m=>t.row.name=m,placeholder:"名称项"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),r(_,{prop:"price",label:"价格",width:"180"},{default:d(t=>[r(g,{prop:`goods_attr.${t.$index}.payback_price`,rules:f.goods_attr_price},{default:d(()=>[r(n,{modelValue:t.row.payback_price,"onUpdate:modelValue":m=>t.row.payback_price=m,placeholder:"回收价格"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),r(_,{prop:"price",label:"单位",width:"180"},{default:d(t=>[r(g,{prop:`goods_attr.${t.$index}.unit`,rules:f.goods_attr_unit},{default:d(()=>[r(n,{modelValue:t.row.unit,"onUpdate:modelValue":m=>t.row.unit=m,placeholder:"单位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),r(_,{prop:"address",label:"操作"},{default:d(t=>[r(p,{onClick:m=>$(t.$index)},{default:d(()=>[Y]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[N,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{ee as _};
