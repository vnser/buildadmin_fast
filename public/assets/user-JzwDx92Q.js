import{b as j,a as D,f as L,_ as C,e as V,W as N,X as P,u as G,m as O}from"./index-KPShGsqr.js";import{H as E,F,i as X}from"./footer-BggEz0cK.js";import{o as J,r as T,g as Y}from"./router-CsHEl4b_.js";import{e as g,a0 as U,m as a,X as Z,o as i,O as d,P as r,k as p,s as n,l as t,U as v,_ as z,h,Y as B,Z as w,W as K,$ as Q,ae as ee,aj as W,j as q,v as te,N as ne,ac as se,x as oe,i as ae,I as re}from"./vue-BZJL1-P9.js";import"./darkSwitch-B_mqpYMx.js";import"./useDark-CX_C7K3k.js";const le={class:"userinfo"},ce=["src"],ie={class:"username"},ue={class:"user-menus"},_e={key:0,class:"user-menu-max-title"},me=["onClick"],pe=g({__name:"aside",setup(f){const m=U(),s=j(),l=D(),u=(o="",e)=>{document.body.clientWidth<992&&l.toggleMenuExpand(!1),o?m.push({name:o}):e&&J(e)};return(o,e)=>{const c=a("Icon"),y=a("el-button"),_=a("el-button-group"),I=a("el-aside"),R=Z("blur");return i(),d(I,{class:"ba-user-layouts"},{default:r(()=>[p("div",le,[p("div",{onClick:e[0]||(e[0]=b=>u("account/profile")),class:"user-avatar-box"},[p("img",{class:"user-avatar",src:n(L)(n(s).avatar?n(s).avatar:"/static/images/avatar.png"),alt:""},null,8,ce),t(c,{class:"user-avatar-gender",name:n(s).getGenderIcon().name,size:"14",color:n(s).getGenderIcon().color},null,8,["name","color"])]),p("p",ie,v(n(s).nickname),1),t(_,null,{default:r(()=>[z((i(),d(y,{onClick:e[1]||(e[1]=b=>u("account/integral")),class:"userinfo-button-item",title:o.$t("Integral")+" "+n(s).score,size:"default",plain:""},{default:r(()=>[p("span",null,v(o.$t("Integral")+" "+n(s).score),1)]),_:1},8,["title"])),[[R]]),z((i(),d(y,{onClick:e[2]||(e[2]=b=>u("account/balance")),class:"userinfo-button-item",title:o.$t("Balance")+" "+n(s).money,size:"default",plain:""},{default:r(()=>[p("span",null,v(o.$t("Balance")+" "+n(s).money),1)]),_:1},8,["title"])),[[R]])]),_:1})]),p("div",ue,[(i(!0),h(w,null,B(n(l).state.viewRoutes,(b,A)=>{var $;return i(),h(w,{key:A},[n(l).state.showHeadline?(i(),h("div",_e,v(($=b.meta)==null?void 0:$.title),1)):K("",!0),(i(!0),h(w,null,B(b.children,(k,H)=>{var M,S,x;return i(),h("div",{key:H,onClick:Ce=>u("",k),class:Q(["user-menu-item",((M=n(l).state.activeRoute)==null?void 0:M.name)==k.name?"active":""])},[t(c,{name:(S=k.meta)==null?void 0:S.icon,size:"16",color:"var(--el-text-color-secondary)"},null,8,["name"]),p("span",null,v((x=k.meta)==null?void 0:x.title),1)],10,me)}),128))],64)}),128))])]),_:1})}}}),de=C(pe,[["__scopeId","data-v-e1f1a266"]]),fe=g({__name:"main",setup(f){const m=V();return(s,l)=>{const u=a("router-view"),o=a("el-main");return i(),d(o,{class:"layout-main"},{default:r(()=>[t(u,null,{default:r(({Component:e})=>[t(ee,{name:n(m).layout.mainAnimation,mode:"out-in"},{default:r(()=>[(i(),d(W(e)))]),_:2},1032,["name"])]),_:1})]),_:1})}}}),ye=C(fe,[["__scopeId","data-v-bc73de31"]]),be=g({__name:"default",setup(f){return(m,s)=>{const l=a("el-col"),u=a("el-row"),o=a("el-scrollbar"),e=a("el-container");return i(),d(e,{class:"is-vertical"},{default:r(()=>[t(E),t(o,{style:q(n(N)),ref_key:"layoutMainScrollbarRef",ref:P},{default:r(()=>[t(u,{class:"frontend-footer-brother",justify:"center"},{default:r(()=>[t(l,{class:"user-layouts",span:16,xs:24},{default:r(()=>[t(de,{class:"hidden-sm-and-down"}),t(ye)]),_:1})]),_:1}),t(F)]),_:1},8,["style"])]),_:1})}}}),ve=C(be,[["__scopeId","data-v-fe6705cb"]]),he=g({__name:"disable",setup(f){return(m,s)=>{const l=a("el-alert"),u=a("el-col"),o=a("el-row"),e=a("el-scrollbar"),c=a("el-container");return i(),d(c,{class:"is-vertical"},{default:r(()=>[t(E),t(e,{style:q(n(N)),ref_key:"layoutMainScrollbarRef",ref:P},{default:r(()=>[t(o,{class:"frontend-footer-brother",justify:"center"},{default:r(()=>[t(u,{class:"user-layouts",span:16,xs:24},{default:r(()=>[t(l,{center:!0,title:m.$t("Member center disabled"),type:"error"},null,8,["title"])]),_:1})]),_:1}),t(F)]),_:1},8,["style"])]),_:1})}}}),ge=C(he,[["__scopeId","data-v-88053b8c"]]);function ke(){return new Promise(f=>{f({type:"continue"})})}const xe=g({components:{Default:ve,Disable:ge},__name:"user",setup(f){const{t:m}=te.useI18n(),s=ne(),l=U(),u=j(),o=G(),e=D();return se(c=>{e.setActiveRoute(c)}),oe(async()=>{const c=await ke();if(c.type=="break")return;if(c.type=="reload")return window.location.href=c.url;if(!u.token)return l.push({name:"userLogin"});const y=()=>{if(c.type=="jump")return l.push(c.url);if(s.params.to){const _=JSON.parse(s.params.to);if(_.path!=O){let I=ae(_.query)?{}:_.query;T({path:_.path,query:I});return}}if(s.name=="userMainLoading"){let _=Y(e.state.viewRoutes);_?l.push({path:_.path}):re({type:"error",message:m("No route found to jump~")})}};o.userInitialize?y():X(y,!0),document.body.clientWidth<1024?e.setShrink(!0):e.setShrink(!1)}),(c,y)=>(i(),d(W(n(e).state.layoutMode)))}});export{xe as default};
